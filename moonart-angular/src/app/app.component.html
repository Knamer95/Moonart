<div class="nav-background fixed-top">

    <nav class="navbar navbar-dark fixed-top">
        <div class="nav-container">

            <div class="nav-el-1">
                <a><img class="img-over tremble" src="assets/img/moon2-ico.png"></a>
                <span><a [routerLink]="['/home']" class="nav-title">MoonArt</a></span>
                <!-->button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01"
                aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button-->
            </div>

            <div class="nav-el-2">
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" [routerLink]="['/home']">{{this.currentLang.attributes.gallery}}<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" [routerLink]="['/feed']">{{this.currentLang.attributes.feed}}<span class="sr-only"></span></a>
                    </li>
                    <!--
                <li class="nav-item">
                    <a class="nav-link" [routerLink]="['/discover']">Descubre</a>
                </li>
            -->
                    <li class="nav-item mr-auto">
                        <a class="nav-link olive" [routerLink]="['/upload-image']">{{this.currentLang.attributes.uploadImage}}&nbsp;<i
                                class="fas fa-upload"></i></a>
                    </li>
                </ul>
            </div>

            <div class="nav-el-3">
                <div class="search-box">
                    <input type="text" class="text search-input" [(ngModel)]="searchQuery" placeholder="{{this.currentLang.attributes.searchImage}}"
                        (keyup.enter)="validateSearch()" required pattern="[A-z0-9_-]+" />
                    <i class="fas fa-search searchbar" (click)="validateSearch()"></i>
                </div>
            </div>

            <div class="nav-el-4">
                <!-- <a class="navbar-brand ml-auto admin" href="#">Administrar</a> -->
                <ul class="navbar-nav right-position log-reg">
                    <li class="nav-item" *ngIf="!identity || identity.nick == 'guest'">
                        <a class="nav-link" [routerLink]="['/login']">{{this.currentLang.attributes.login}}</a>
                    </li>
                    <li class="nav-item" *ngIf="!identity || identity.nick == 'guest'">
                        <a class="nav-link" [routerLink]="['/register']">{{this.currentLang.attributes.register}}</a>
                    </li>

                    <!-- <button class="btn btn-outline-info btn-toggle" onclick="this.blur(); swap();"><i class="fas fa-lightbulb"></i></button> -->
                    <li class="nav-item" *ngIf="identity && identity.nick != 'guest'">
                        <span class="nav-welcome">{{this.currentLang.attributes.welcomeMsg}}, </span>
                        <div class="dropdown show">
                            <button class="btn dropdown-toggle username nav-link nav-item" role="button" id="dropdownMenuLink"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{identity.nick}}</button>

                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                                <a class="dropdown-item" id="view-profile" [href]="['/profile/' + identity.nick]">{{this.currentLang.attributes.profile}}</a>
                                <a class="dropdown-item" id="edit-profile" [routerLink]="['/edit']">{{this.currentLang.attributes.editProfile}}</a>
                                <a class="dropdown-item" id="edit-profile" [routerLink]="['/settings']">{{this.currentLang.attributes.config}}</a>
                                <a class="dropdown-item" id="logout" [routerLink]="['/logout/1']">{{this.currentLang.attributes.exit}}</a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav> <!-- End of navigation bar -->
</div>
<div class="nav-spacing"></div>

<!-- Contenido -->
<router-outlet (activate)="onActivate($event)"></router-outlet>
<!--   
    We add onActivate, and in the ts we specify that the event 
    is (emitter)="onEmited($event)" on that fn.
    
    https://stackoverflow.com/questions/38393494/how-to-emit-event-in-router-outlet-in-angular2
-->

<!-- <app-settings (emitter)="onEmited($event)" style="display: none;"></app-settings> -->
<!--
    This, would add an app-settings instance, which 
    would be present on every module, repeating on settings module.
-->